# 高阶函数

> `Haskell`的函数可以使用函数作为参数，并且将函数作为返回值。执行这种操作的函数称为**高
阶函数**。高阶函数并不只有`Haskell`有，其它语言也有，但在`Haskell`中使用高阶函数更加美
妙。其它语言可能需要你定义一步步操作去修改不同变量的值，或者使用循环语句去执行一些操作，
在`Haskell`中，你只需要定义你的原始数据是什么就能帮你完成计算。高阶函数对于任何语言都是
必不可少的，它对于解决问题和思考程序设计是强有力的工具。

## 柯里化函数 [Curried functions](https://zh.wikipedia.org/wiki/%E6%9F%AF%E9%87%8C%E5%8C%96)

在正式定义中，`Haskell`的函数都只使用一个参数的形式。你可能会想，这怎么可能，到目前为止，
我们已经使用过了好多函数都是使用了多个参数的形式。好吧，这是一个很聪明的小技法。目前我们
所使用到的，看似使用多个参数的函数其实都是柯里化函数。那到底是什么意思？我们通过一个案例
去理解。下面请出我们的好朋友：`max`方法。`max`方法好像使用两个参数并返回其中一个较大者。
在执行`max 4 5`的过程中，首先选择一个参数，如`max 4`，返回结果为一个函数，然后再拿`5`作
为其参数，最后返回我们需要的较大者。这个看起来很怪，但确实是一个不错的想法。下面两个调用
方法是等价的。

```haskell
ghci> max 4 5  
5  
ghci> (max 4) 5  
5  
```

使用空格将不同的标识隔开，是比较简单的函数范式。空格符号就你是一个操作符号，并且它具有较
高的优先级。先让我们看下`max`的类型，`max :: (Ord a) => a -> a -> a`，它还可以写成
`max :: (Ord a) => a -> (a -> a)`。可以理解成`max`函数使用一个`a`作为参数，并返回一个
另一个函数，返回的函数使用`a`作为参数，并返回`a`。这就是为什么返回类型和参数之间使用箭头
作为分隔。

那这些对于我们来说，有什么帮助呢？简单来说，如果我们没有太多参数的函数，意味函数执行并没
有过多参数的参与，这一类方法叫做`partially applied 函数`。使用这一类的函数是比较简洁的，
我们将函数传递到其它函数作为参数或者传入数据到这些函数。

给出下面这个例子

```haskell
multThree :: (Num a) => a -> a -> a -> a  
multThree x y z = x * y * z
```
当我们执行`multThree 3 5 9`或`((multThree 3) 5) 9`，会发生什么？首先，因为使用空格分
隔，`3`被应用于函数`multThree`，返回以使用一个参数，且返回值为函数的一个函数。所以`5`接
着被应用于返回的函数中，再一次返回以使用一个参数，且返回值为函数的一个函数，最后与`15`相
乘，返回`135`。记住，上述的函数类型还可以写成`multThree :: (Num a) => a -> (a -> (a -> a))`。
在`->`前的元素是函数要调用的参数，在其后面是返回值。函数的类型说明指出，使用一个`a`作为
参数，返回一个`(Num a) => a -> (a -> a)`类型的函数。再进一步，返回的函数依然是以一个`a`
作为参数，返回一个函数，形如`(Num a) => a -> a`。最后返回的函数，使用一个`a`作为参数，
并返回一个`a`。

```haskell
ghci> let multTwoWithNine = multThree 9  
ghci> multTwoWithNine 2 3  
54  
ghci> let multWithEighteen = multTwoWithNine 2  
ghci> multWithEighteen 10  
180  
```

我们可以很快速地创建一些少量参数的函数，比如我们要创建一个函数，使用一个`a`作为参数，并
与100比较，我们可以这么做：

```haskell
compareWithHundred :: (Num a, Ord a) => a -> Ordering  
compareWithHundred x = compare 100 x  
```
 