# 介绍

## 关于这个教程

欢迎来到《Haskell利剑》！如果你在读这本书，很有可能你想学习Haskell。不错，你来对地方了，让我们先来谈谈这部教程吧！

我之所以决定写这部教程，初衷是因为想巩固一下自己对Haskell的理解，也想通过我理解的维度去帮助新的小伙伴学习Haskell。在网上，其实已经有一些关于Haskell的教程了。当我开始学Haskell的时候，我并不是只从一个渠道学习。我通过阅读不同的教程和文章来学习，毕竟每篇文章都会有一些独到的见解。通过不同渠道的学习，我将这些碎片化的知识整合到了一块，就这样开始我的学习之旅。因此，希望这个尝试能够给你提供一个新的学习渠道，让你能够有更多选择去找到合适自己的。

本教程主要针对的是有命令式编程语言（如C、C++、Java、Python等）经验的童鞋，即使没有函数式语言（如ML、Hashkell、OCaml等）这方面的经验也没关系。不过呢，我觉得即使你没有任何编程经验，以你的才华，肯定也能理解、学习好Haskell！

在freenode网站上，我们有一个haskell的频道，如果你遇到什么问题，都可以在上面进行提问。这里的人非常nice，对于新手非常有耐心，很懂你。

我大概学了2遍都无法领悟，最终才摸清思路。因为之前我觉得它确实很怪异，简直无法驾驭它。不过一旦有点思路了，并且克服掉最开始的一些障碍后，学习起来很多问题就能迎刃而解了。我想说，其实Haskell很伟大，即使你一开始会觉得它很奇葩，但如果你对编程感兴趣，你应该学一下。学习Haskell很像第一次学编程——它确实有点意思。它将颠覆你的思维，颠覆到下一个章节。


## Haskell是什么鬼？

Haskell是一种纯函数编程语言。在命令行语言中，通过给计算机提供一系列的任务，并执行这些任务。执行过程中，它可能改变了某些状态。比如说，你把一个变量a赋值为5，然后执行一些操作之后，该变成其他内容。你可以多次控制流结构来执行某些操作。在纯函数编程中，你不是告诉计算机做些什么，而是告诉它什么是什么，一个数的阶乘就是1到这个数的所有乘积，一个数列的和，就是所有数字的和，等等。你无法赋值一个变量之后，将其设置成其他内容。如果你说a等于5，你就无法说a是其他，因为你已经说过它等于5了。你想干嘛啦，想撒谎吗？所以嘛，在纯函数语言中，函数没有“副作用”的。函数唯一可以做到的就是计算之后返回结果。首先，这样看来似乎是有点局限的，但是实际上，它有一个正面的意义：如果函数通过相同参数被调用两次的话，都会保证返回相同结果。这就叫做引用透明性，它不仅允许编译器对程序的行为进行推理，而且还允许你轻松地推断（甚至证明）一个函数是否正确，之后就可以通过对函数进行组合构建出更加复杂的函数。

Haskell是惰性的。这意味着，除非专门告知，否则Haskell将不会执行函数进行计算。只有真正告知执行才会给你结果。引用透明性非常好，它允许你将程序看成是数据的一系列转换。它还有一些非常酷的特性，比如说无穷数据结构。假设有一个不可变的数字列表`xs = [1,2,3,4,5,6,7,8]` 和一个函数 `doubleMe`（将每个元素乘以2后返回新列表）。如果我们使用命令编程语言，要将列表乘以8，则使用`doubleMe(doubleMe(doubleMe(xs)))`，执行过程中可能就将列表复制之后返回新列表，再复制新列表再返回更新列表，再复制更新的列表又再返回更更新的列表，三生三世啊！而在惰性语言中，如果你要对一个列表进行`doubleMe`操作，但不强制要求马上显示结果，它会说“好好好，我稍后会做的！”如果你想要马上看到结果，那么第一个`doubleMe`就会告诉第二个说，现在立刻马上出来结果！第二个会告诉第三个，第三个就不情愿地返回1的2倍，也就是2.第二个收到结果后，就会返回4给第一个。第一个收到结果后，就会返回并且告知第一个元素是8。所以只有你真正操作到列表的时候，它才会通过列表进行计算。如此，当你想用惰性语言中得到一些东西时，你可以只获取到一些初始化数据，然后进行有效地转换和修复，它就会得出你最终想要的结果。

Haskell语言是属于静态类型的。编译程序时，编译器知道哪段代码是一个数字，哪个是字符串等等。这意味着在编译时可能会发现很多错误。如果你试图将一个数字和一个字符串相加，编译器会给你差评的。Haskell使用了一个非常好的类型系统，它具有类型推断。这样你就不必显式地将每一段代码都标记为一个类型，因为类型系统会很英明地计算出来。如果你说a = 5 + 4，你不需要告诉Haskell a是一个数字，它懂的。类型推断还允许你的代码更笼统。如果一个函数取两个参数并将它们加在一起，而不显式地声明它们的类型，则函数将处理任意两个类似于数字的参数。

Haskell优雅简洁。因为它使用了许多高级的概念，Haskell程序通常比同等效果的命令行程序要更加短。短小精悍更易维护，出现bug肯定也更少。

Haskell是由一些非常聪明的大牛(有博士学位)开发的。Haskell的研究始于1987年，当时一个研究小组联合设计了一种极具活力的语言。2003年，Haskell报告发布，定义了一个稳定的版本。

## 需要准备什么？

一个文本编辑器和一个Haskell编译器。你可能已经安装了自己最喜欢的文本编辑器，我们就不会浪费时间了。为了方便本教程，我们将采用被广泛使用的Haskell编译器GHC。开始使用Haskell，最好是下载`[Haskell平台](http://hackage.haskell.org/platform/)`，它包含了基本的工具。

GHC可以对Haskell脚本（通常会带.hs后缀）进行编译，而且它也有一种交互模式，允许你跟脚本进行交互。交互就是说，你可以从加载的脚本调用函数并立刻显示结果。这样对于学习的话，你每次修改然后在命令提示符里边运行程序的话，就更加容易而且快得多了。通过在命令提示符中输入ghci来调用交互模式。假如你在`myfunctions.hs`文件定义了一些函数，你可以通过输入`:l myfunction` ,接着你就可以调用了。myfunctions.hs需要位于调用ghci的同一个文件夹中。如果改变了.hs文件上的脚本的话，只需要再次执行`:l myfunction` 或者是执行`:r`，这两个命令是等效的，它都会重新加载当前的脚本。我通常的玩法是定义在一个.hs文件中定义一些函数，然后加载文件跟函数后，再修改文件，再加载等等，这也是以后我们将要做的。